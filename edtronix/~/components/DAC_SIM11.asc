Version 4
SHEET 1 1124 680
WIRE 720 -304 672 -304
WIRE 672 -256 672 -304
WIRE 640 -240 592 -240
WIRE 832 -224 704 -224
WIRE 992 -224 832 -224
WIRE 640 -208 560 -208
WIRE 992 -176 992 -224
WIRE 832 -160 832 -224
WIRE 672 -128 672 -192
WIRE 720 -128 672 -128
WIRE 592 -64 592 -240
WIRE 832 -64 832 -96
WIRE 832 -64 592 -64
WIRE 560 -32 560 -208
WIRE 672 -32 560 -32
WIRE -400 0 -480 0
WIRE 256 32 208 32
WIRE 480 32 448 -16
WIRE 480 32 336 32
WIRE 560 32 480 32
WIRE 672 32 672 -32
WIRE 672 32 736 0
WIRE 672 32 640 32
WIRE 832 32 832 -64
WIRE 880 32 832 32
WIRE 992 32 992 -96
WIRE 992 32 960 32
WIRE 208 64 208 32
WIRE -480 80 -480 0
WIRE 672 96 672 32
WIRE 480 112 480 32
WIRE 832 112 832 32
WIRE -480 208 -480 160
WIRE -400 208 -480 208
WIRE -400 240 -400 208
WIRE -480 256 -480 208
WIRE 208 288 208 144
WIRE 480 288 480 192
WIRE 480 288 208 288
WIRE 672 288 672 160
WIRE 672 288 480 288
WIRE 832 288 832 192
WIRE 832 288 672 288
WIRE 672 320 672 288
WIRE -480 400 -480 336
WIRE -400 400 -480 400
FLAG 448 -16 IN
FLAG 672 320 0
FLAG -400 400 -Vcc
FLAG -400 0 +Vcc
FLAG 720 -304 +Vcc
FLAG 720 -128 -Vcc
FLAG -400 240 0
FLAG 992 -224 OUT
FLAG 736 0 Fin
SYMBOL voltage 208 48 R0
WINDOW 3 -386 -133 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -191 -6 Left 2
SYMATTR Value PULSE(0 5 {Toff} 80n 80n {Ton} {Tp} 50000)
SYMATTR InstName ADx_Output
SYMBOL res 464 96 R0
SYMATTR InstName R1
SYMATTR Value 2.21K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 544 48 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res 848 208 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res 976 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 976 -192 R0
SYMATTR InstName R5
SYMATTR Value 100k
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL voltage -480 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V-
SYMATTR Value 3V
SYMBOL res 352 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value {Rx}
SYMBOL voltage -480 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V+
SYMATTR Value 12.5V
SYMBOL cap 816 -160 R0
SYMATTR InstName C1
SYMATTR Value 0.01µ
SYMATTR SpiceLine V=4 Irms=162m Rser=0.0322889 Lser=0 mfg="KEMET" pn="C0201C103K7PAC" type="X5R"
SYMBOL cap 656 96 R0
SYMATTR InstName C2
SYMATTR Value {Cf}
SYMBOL OpAmps\\LT1496 672 -288 R0
SYMATTR InstName U1
TEXT 200 368 Left 2 !.param x=400u ; PWM Value
TEXT 584 376 Left 2 !.tran 0 2000m 10u 100u
TEXT 200 432 Left 2 !.param Ton=x Toff=Tp-x
TEXT 200 400 Left 2 !.param Tp=2m
TEXT 200 472 Left 2 !.param Rx=2.2
TEXT 200 504 Left 2 !.param Cf=2.2u
