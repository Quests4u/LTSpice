Version 4
SHEET 1 3168 10092
WIRE 720 -304 672 -304
WIRE 672 -256 672 -304
WIRE 640 -240 592 -240
WIRE 832 -224 704 -224
WIRE 992 -224 832 -224
WIRE 640 -208 560 -208
WIRE -160 -192 -240 -192
WIRE 992 -176 992 -224
WIRE 832 -160 832 -224
WIRE 672 -128 672 -192
WIRE 720 -128 672 -128
WIRE 592 -64 592 -240
WIRE 832 -64 832 -96
WIRE 832 -64 592 -64
WIRE 560 -32 560 -208
WIRE 672 -32 560 -32
WIRE 256 32 208 32
WIRE 480 32 448 -16
WIRE 480 32 336 32
WIRE 560 32 480 32
WIRE 672 32 672 -32
WIRE 672 32 736 0
WIRE 672 32 640 32
WIRE 832 32 832 -64
WIRE 880 32 832 32
WIRE 992 32 992 -96
WIRE 992 32 960 32
WIRE 208 64 208 32
WIRE 672 96 672 32
WIRE 480 112 480 32
WIRE 832 112 832 32
WIRE -240 160 -240 -192
WIRE -240 288 -240 240
WIRE -128 288 -240 288
WIRE 208 288 208 144
WIRE 480 288 480 192
WIRE 480 288 208 288
WIRE 672 288 672 160
WIRE 672 288 480 288
WIRE 832 288 832 192
WIRE 832 288 672 288
WIRE 672 320 672 288
WIRE -240 336 -240 288
WIRE -128 336 -128 288
WIRE -240 480 -240 416
WIRE -160 480 -240 480
FLAG 448 -16 IN
FLAG 672 320 0
FLAG -160 480 -Vcc
FLAG -160 -192 +Vcc
FLAG 720 -304 +Vcc
FLAG 720 -128 -Vcc
FLAG -128 336 0
FLAG 992 -224 OUT
FLAG 736 0 Fin
SYMBOL voltage 208 48 R0
WINDOW 3 -386 -133 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -182 25 Left 2
SYMATTR Value PULSE(0 5 {Toff} 120n 120n {Ton} {Tp} 50000)
SYMATTR InstName ADx_Output
SYMBOL res 464 96 R0
SYMATTR InstName R1
SYMATTR Value 2.21K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 544 48 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res 848 208 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res 976 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 976 -192 R0
SYMATTR InstName R5
SYMATTR Value 100k
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL voltage -240 320 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V-
SYMATTR Value 3V
SYMBOL res 352 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value {Rx}
SYMBOL voltage -240 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V+
SYMATTR Value 12.5V
SYMBOL cap 816 -160 R0
SYMATTR InstName C1
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=4 Irms=0 Rser=0 Lser=0 mfg="Murata" pn="GRM011R60G103KE01" type="X5R"
SYMBOL polcap 656 96 R0
WINDOW 3 24 56 Left 2
SYMATTR Value 2.2µ
SYMATTR InstName C2
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=6.3 Irms=0 Rser=9 Lser=0 mfg="AVX" pn="TAJA225M006" type="Tantalum"
SYMBOL OpAmps\\opamp2 672 -288 R0
SYMATTR InstName U1
SYMATTR Value LM324
TEXT 224 376 Left 2 !.param x=1400u ; PWM Value
TEXT 672 376 Left 2 !.tran 0 2000m 10u 100u
TEXT 224 424 Left 2 !.param Ton=x Toff=Tp-x
TEXT 224 400 Left 2 !.param Tp=2m
TEXT 224 448 Left 2 !.param Rx=3
TEXT 224 472 Left 2 !.param Cf=2.2u
TEXT 672 464 Left 2 !.lib lm324.lib
TEXT 672 432 Left 2 !; -> error inside .lib LMx24_LM2902.sub
